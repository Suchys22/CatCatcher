[gd_scene load_steps=20 format=2]

[ext_resource path="res://addons/zylann.hterrain/hterrain.gd" type="Script" id=1]
[ext_resource path="res://addons/zylann.hterrain/hterrain_texture_set.gd" type="Script" id=2]
[ext_resource path="res://Assets/Levels/Pilgrims_slot0_albedo_bump.packed_tex" type="Texture" id=3]
[ext_resource path="res://Assets/Levels/Pilgrims_slot1_albedo_bump.packed_tex" type="Texture" id=4]
[ext_resource path="res://Assets/Cats/Kocka.tscn" type="PackedScene" id=5]
[ext_resource path="res://Assets/Levels/Pilgrims_slot0_normal_roughness.packed_tex" type="Texture" id=6]
[ext_resource path="res://Assets/Cats/Spawn.gd" type="Script" id=7]
[ext_resource path="res://Assets/Levels/Pilgrims_slot1_normal_roughness.packed_tex" type="Texture" id=8]
[ext_resource path="res://Assets/Player/Player.tscn" type="PackedScene" id=9]
[ext_resource path="res://Assets/Shop/Sell.tscn" type="PackedScene" id=10]
[ext_resource path="res://Assets/Levels/TerrainData/data.hterrain" type="Resource" id=11]
[ext_resource path="res://Assets/UIs/Hud/HUD.tscn" type="PackedScene" id=13]

[sub_resource type="Animation" id=4]
resource_name = "Day_night"
length = 720.0
loop = true
tracks/0/type = "value"
tracks/0/path = NodePath(".:rotation_degrees")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0, 720 ),
"transitions": PoolRealArray( 1, 1 ),
"update": 0,
"values": [ Vector3( -90, 0, 0 ), Vector3( 270, 0, 0 ) ]
}
tracks/1/type = "value"
tracks/1/path = NodePath(".:light_energy")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/keys = {
"times": PoolRealArray( 0, 140.4, 146.1, 200, 520, 570.6, 581.8, 720 ),
"transitions": PoolRealArray( 1, 1, 1, 1, 1, 1, 1, 1 ),
"update": 0,
"values": [ 0.6, 0.6, 0.2, 0.0, 0.0, 0.2, 0.6, 0.6 ]
}

[sub_resource type="Animation" id=5]
length = 0.001
tracks/0/type = "transform"
tracks/0/path = NodePath(".")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = PoolRealArray( 0, 1, 3.82487, 5.43602, 5.79178, -0.707107, 0, 0, 0.707107, 1, 1, 1 )
tracks/1/type = "value"
tracks/1/path = NodePath(".:rotation_degrees")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/keys = {
"times": PoolRealArray( 0 ),
"transitions": PoolRealArray( 1 ),
"update": 0,
"values": [ Vector3( -90, 0, 0 ) ]
}
tracks/2/type = "value"
tracks/2/path = NodePath(".:light_energy")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/keys = {
"times": PoolRealArray( 0 ),
"transitions": PoolRealArray( 1 ),
"update": 0,
"values": [ 1.0 ]
}

[sub_resource type="ProceduralSky" id=1]

[sub_resource type="Environment" id=2]
background_mode = 1
background_sky = SubResource( 1 )
background_color = Color( 0.486275, 0.647059, 0.654902, 1 )
ambient_light_color = Color( 0.486275, 0.647059, 0.654902, 1 )
ambient_light_energy = 0.1
fog_enabled = true
fog_color = Color( 0.776471, 0.843137, 0.913725, 1 )
fog_depth_begin = 70.0
fog_depth_end = 600.0
fog_height_enabled = true
fog_height_min = 70.0
fog_height_max = 80.0
tonemap_mode = 3
ssao_enabled = true
ssao_bias = 0.1
ssao_light_affect = 1.0
dof_blur_far_enabled = true
dof_blur_far_distance = 450.0
dof_blur_far_transition = 90.0
dof_blur_far_amount = 0.05
glow_enabled = true
glow_bloom = 0.07
glow_blend_mode = 0
glow_bicubic_upscale = true
glow_high_quality = true

[sub_resource type="Animation" id=6]
length = 0.001
tracks/0/type = "value"
tracks/0/path = NodePath(".:environment:ambient_light_color")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0 ),
"transitions": PoolRealArray( 1 ),
"update": 0,
"values": [ Color( 0.486275, 0.647059, 0.654902, 1 ) ]
}
tracks/1/type = "value"
tracks/1/path = NodePath(".:environment:background_color")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/keys = {
"times": PoolRealArray( 0 ),
"transitions": PoolRealArray( 1 ),
"update": 0,
"values": [ Color( 0.486275, 0.647059, 0.654902, 1 ) ]
}
tracks/2/type = "value"
tracks/2/path = NodePath(".:environment:fog_color")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/keys = {
"times": PoolRealArray( 0 ),
"transitions": PoolRealArray( 1 ),
"update": 0,
"values": [ Color( 0.776471, 0.843137, 0.913725, 1 ) ]
}

[sub_resource type="Animation" id=7]
resource_name = "SkyColor"
length = 720.0
loop = true
tracks/0/type = "value"
tracks/0/path = NodePath(".:environment:background_color")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0, 140, 180, 199.7, 360, 530, 540.5, 580, 720 ),
"transitions": PoolRealArray( 1, 1, 1, 1, 1, 1, 1, 1, 1 ),
"update": 0,
"values": [ Color( 0.486275, 0.647059, 0.654902, 1 ), Color( 0.486275, 0.647059, 0.654902, 1 ), Color( 1, 0.701961, 0.188235, 1 ), Color( 0.0117647, 0, 0.0470588, 1 ), Color( 0.0352941, 0.0117647, 0.0509804, 1 ), Color( 0, 0, 0, 1 ), Color( 1, 0.909804, 0.180392, 1 ), Color( 0.486275, 0.647059, 0.654902, 1 ), Color( 0.486275, 0.647059, 0.654902, 1 ) ]
}
tracks/1/type = "value"
tracks/1/path = NodePath(".:environment:ambient_light_color")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/keys = {
"times": PoolRealArray( 0, 140, 180, 200, 530, 540, 580, 720 ),
"transitions": PoolRealArray( 1, 1, 1, 1, 1, 1, 1, 1 ),
"update": 0,
"values": [ Color( 1, 1, 1, 1 ), Color( 0.486275, 0.647059, 0.654902, 1 ), Color( 0.996078, 0.698039, 0.188235, 1 ), Color( 0, 0, 0, 1 ), Color( 0, 0, 0, 1 ), Color( 1, 0.819608, 0.113725, 1 ), Color( 0.486275, 0.647059, 0.654902, 1 ), Color( 0.486275, 0.647059, 0.654902, 1 ) ]
}
tracks/2/type = "value"
tracks/2/path = NodePath(".:environment:fog_color")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/keys = {
"times": PoolRealArray( 0, 140, 180, 200, 520, 540, 580, 720 ),
"transitions": PoolRealArray( 1, 1, 1, 1, 1, 1, 1, 1 ),
"update": 0,
"values": [ Color( 0.776471, 0.843137, 0.913725, 1 ), Color( 0.776471, 0.843137, 0.913725, 1 ), Color( 1, 0.8, 0.458824, 1 ), Color( 0, 0, 0, 1 ), Color( 0, 0, 0, 1 ), Color( 1, 0.964706, 0.419608, 1 ), Color( 0.776471, 0.843137, 0.913725, 1 ), Color( 0.776471, 0.843137, 0.913725, 1 ) ]
}

[sub_resource type="Resource" id=8]
script = ExtResource( 2 )
mode = 0
textures = [ [ ExtResource( 3 ), ExtResource( 4 ) ], [ ExtResource( 6 ), ExtResource( 8 ) ] ]

[node name="World" type="Spatial"]

[node name="Hud" parent="." instance=ExtResource( 13 )]

[node name="Label" parent="Hud/Backpack/Sell" index="0"]
text = "$0"

[node name="Progress" parent="Hud/Backpack" index="1"]
value = 0.0

[node name="Kocky" type="Node" parent="."]
script = ExtResource( 7 )

[node name="Kocka" parent="Kocky" instance=ExtResource( 5 )]
transform = Transform( 0.292715, 0, 0, 0, 0.294798, 0, 0, 0, 0.303764, 1033.46, 0, 1049.92 )

[node name="Kocka2" parent="Kocky" instance=ExtResource( 5 )]
transform = Transform( 0.292715, 0, 0, 0, 0.294798, 0, 0, 0, 0.303764, 1031.49, 0, 1046.89 )

[node name="Kocka3" parent="Kocky" instance=ExtResource( 5 )]
transform = Transform( 0.292715, 0, 0, 0, 0.294798, 0, 0, 0, 0.303764, 1029.36, 0, 1046.89 )

[node name="Kocka4" parent="Kocky" instance=ExtResource( 5 )]
transform = Transform( 0.292715, 0, 0, 0, 0.294798, 0, 0, 0, 0.303764, 1025.56, 0.0643935, 1047.08 )

[node name="Kocka5" parent="Kocky" instance=ExtResource( 5 )]
transform = Transform( 0.292715, 0, 0, 0, 0.294798, 0, 0, 0, 0.303764, 1027.58, 0, 1046.89 )

[node name="DirectionalLight" type="DirectionalLight" parent="."]
transform = Transform( 1, 0, 0, 0, -4.37114e-08, 1, 0, -1, -4.37114e-08, 3.82487, 5.43602, 5.79178 )
light_size = 0.817
light_cull_mask = 4294967279
shadow_enabled = true
directional_shadow_blend_splits = true

[node name="AnimationPlayer" type="AnimationPlayer" parent="DirectionalLight"]
autoplay = "Day_night"
anims/Day_night = SubResource( 4 )
anims/RESET = SubResource( 5 )

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource( 2 )

[node name="AnimationPlayer" type="AnimationPlayer" parent="WorldEnvironment"]
autoplay = "SkyColor"
anims/RESET = SubResource( 6 )
anims/SkyColor = SubResource( 7 )

[node name="Scripts" type="Spatial" parent="."]

[node name="Sell" parent="Scripts" instance=ExtResource( 10 )]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 1034.71, 0, 1042.87 )

[node name="Player" parent="Scripts" instance=ExtResource( 9 )]
transform = Transform( -0.993447, 0, -0.114296, 0, 1, 0, 0.114296, 0, -0.993447, 1036.34, 0.835112, 1045.94 )

[node name="Melee" parent="Scripts/Player/Head/Camera" index="1"]
transform = Transform( 1, 0, 0, 0, 0.34202, 0.939693, 0, -0.939693, 0.34202, 0.7, -0.9, -0.9 )

[node name="HTerrain" type="Spatial" parent="."]
script = ExtResource( 1 )
_terrain_data = ExtResource( 11 )
chunk_size = 32
collision_enabled = true
collision_layer = 1
collision_mask = 1
shader_type = "Classic4Lite"
custom_shader = null
custom_globalmap_shader = null
texture_set = SubResource( 8 )
shader_params/u_ground_uv_scale = 3.0
shader_params/u_depth_blending = true
shader_params/u_triplanar = false
shader_params/u_tile_reduction = Plane( 1, 1, 1, 0 )

[connection signal="selled" from="Scripts/Sell" to="Hud/Backpack" method="_on_Sell_selled"]
[connection signal="backpack_changed" from="Scripts/Player" to="Hud/Backpack" method="_on_Player_backpack_changed"]
[connection signal="hp_changed" from="Scripts/Player" to="Hud/HP/Progress" method="_on_Player_hp_changed"]
[connection signal="stamina_changed" from="Scripts/Player" to="Hud/Stamina/Progress" method="_on_Player_stamina_changed"]

[editable path="Hud"]
[editable path="Scripts/Sell"]
[editable path="Scripts/Player"]
